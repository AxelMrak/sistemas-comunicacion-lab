<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistemas de Comunicación - Laboratorio Interactivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a237e;
            --primary-light: #3949ab;
            --secondary: #00bcd4;
            --accent: #ff5722;
            --bg-dark: #0d1117;
            --bg-card: #161b22;
            --bg-panel: #21262d;
            --text: #e6edf3;
            --text-muted: #8b949e;
            --border: #30363d;
            --success: #238636;
            --warning: #f0883e;
            --error: #da3633;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 16px;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 15px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .nav-tab {
            padding: 12px 20px;
            border: none;
            background: var(--bg-panel);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .nav-tab:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--secondary);
            color: var(--bg-dark);
            font-weight: 600;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }

        .card h2 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            color: var(--text);
            margin: 20px 0 10px;
            font-size: 1.2rem;
            border-left: 3px solid var(--secondary);
            padding-left: 12px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        .canvas-container {
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid var(--border);
        }

        canvas {
            width: 100%;
            height: 300px;
            display: block;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 15px;
            background: var(--bg-panel);
            border-radius: 8px;
            margin-top: 15px;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: var(--border);
            border-radius: 3px;
            outline: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--secondary);
            border-radius: 50%;
            cursor: pointer;
        }

        .control-group .value {
            display: inline-block;
            margin-left: 10px;
            color: var(--secondary);
            font-weight: 600;
        }

        .info-box {
            background: rgba(0, 188, 212, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .formula {
            background: var(--bg-dark);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 15px 0;
            border: 1px solid var(--border);
            font-size: 1.1rem;
        }

        .highlight {
            color: var(--secondary);
            font-weight: 600;
        }

        .param-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .param-card {
            background: var(--bg-panel);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .param-card h4 {
            color: var(--secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .param-card p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .toggle-group {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .toggle-btn {
            padding: 10px 20px;
            border: 1px solid var(--border);
            background: var(--bg-panel);
            color: var(--text);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-btn.active {
            background: var(--secondary);
            color: var(--bg-dark);
            border-color: var(--secondary);
        }

        .system-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: var(--bg-panel);
            border-radius: 12px;
            margin: 20px 0;
        }

        .diagram-box {
            background: var(--primary);
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 100px;
        }

        .diagram-box.transducer {
            background: var(--accent);
        }

        .diagram-arrow {
            font-size: 1.5rem;
            color: var(--secondary);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-panel);
            color: var(--secondary);
            font-weight: 600;
        }

        tr:hover {
            background: var(--bg-panel);
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 15px 0;
            padding: 15px;
            background: var(--bg-panel);
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--secondary);
        }

        .bit-display {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            letter-spacing: 4px;
            background: var(--bg-dark);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 10px 0;
        }

        .bit {
            display: inline-block;
            padding: 5px 8px;
            margin: 2px;
            background: var(--bg-panel);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .bit:hover {
            background: var(--primary-light);
        }

        .bit.error {
            background: var(--error);
        }

        .bit.parity {
            background: var(--warning);
        }

        .constellation {
            width: 300px;
            height: 300px;
            margin: 20px auto;
            position: relative;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .constellation-point {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--secondary);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.2s;
        }

        .constellation-point:hover {
            width: 16px;
            height: 16px;
            background: var(--accent);
        }

        .constellation-point::after {
            content: attr(data-label);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: var(--text-muted);
            white-space: nowrap;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            header h1 {
                font-size: 1.8rem;
            }
            .nav-tabs {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistemas de Comunicación</h1>
            <p>Laboratorio Interactivo de Conceptos y Modulaciones</p>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('senal')">Señales</button>
            <button class="nav-tab" onclick="showSection('sistema')">Sistema</button>
            <button class="nav-tab" onclick="showSection('perturbaciones')">Perturbaciones</button>
            <button class="nav-tab" onclick="showSection('modulacion')">Modulación</button>
            <button class="nav-tab" onclick="showSection('analogica')">Mod. Analógica</button>
            <button class="nav-tab" onclick="showSection('digital')">Mod. Digital</button>
            <button class="nav-tab" onclick="showSection('multinivel')">Multinivel</button>
            <button class="nav-tab" onclick="showSection('pcm')">PCM</button>
            <button class="nav-tab" onclick="showSection('errores')">Errores</button>
        </nav>

        <!-- SECCIÓN 1: SEÑALES -->
        <section id="senal" class="content-section active">
            <div class="grid-2">
                <div class="card">
                    <h2>Señal Sinusoidal</h2>
                    <div class="formula">
                        x(t) = A · sen(2πf·t + φ)
                    </div>
                    <div class="canvas-container">
                        <canvas id="sinusoidCanvas"></canvas>
                    </div>
                    <div class="controls">
                        <div class="control-group">
                            <label>Amplitud (A): <span class="value" id="ampVal">1.0</span></label>
                            <input type="range" id="amplitude" min="0.1" max="2" step="0.1" value="1">
                        </div>
                        <div class="control-group">
                            <label>Frecuencia (f): <span class="value" id="freqVal">1</span> Hz</label>
                            <input type="range" id="frequency" min="0.5" max="5" step="0.5" value="1">
                        </div>
                        <div class="control-group">
                            <label>Fase (φ): <span class="value" id="phaseVal">0</span>°</label>
                            <input type="range" id="phase" min="0" max="360" step="15" value="0">
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>Parámetros</h2>
                    <div class="param-grid">
                        <div class="param-card">
                            <h4>Amplitud (A)</h4>
                            <p>Valor máximo de la señal</p>
                        </div>
                        <div class="param-card">
                            <h4>Frecuencia (f)</h4>
                            <p>Ciclos por segundo (Hz)</p>
                        </div>
                        <div class="param-card">
                            <h4>Período (T)</h4>
                            <p>T = 1/f (segundos)</p>
                        </div>
                        <div class="param-card">
                            <h4>Fase (φ)</h4>
                            <p>Desplazamiento inicial</p>
                        </div>
                        <div class="param-card">
                            <h4>Longitud de onda (λ)</h4>
                            <p>λ = v/f (metros)</p>
                        </div>
                        <div class="param-card">
                            <h4>Frecuencia Angular (ω)</h4>
                            <p>ω = 2πf (rad/s)</p>
                        </div>
                    </div>
                    <div class="info-box">
                        <strong>Relación frecuencia-período:</strong> Son inversamente proporcionales. 
                        A mayor frecuencia, menor período.
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Tipos de Señales</h2>
                <div class="toggle-group">
                    <button class="toggle-btn active" onclick="showSignalType('analogica')">Analógica</button>
                    <button class="toggle-btn" onclick="showSignalType('digital')">Digital</button>
                    <button class="toggle-btn" onclick="showSignalType('periodica')">Periódica</button>
                    <button class="toggle-btn" onclick="showSignalType('noperiodica')">No Periódica</button>
                </div>
                <div class="canvas-container">
                    <canvas id="signalTypeCanvas"></canvas>
                </div>
                <div id="signalInfo" class="info-box">
                    <strong>Señal Analógica:</strong> Toma infinitos valores. Continua en tiempo y amplitud. 
                    Ejemplo: voz natural, música. Susceptible al ruido (no se puede regenerar).
                </div>
            </div>
        </section>

        <!-- SECCIÓN 2: SISTEMA DE COMUNICACIÓN -->
        <section id="sistema" class="content-section">
            <div class="card">
                <h2>Componentes del Sistema</h2>
                <div class="system-diagram">
                    <div class="diagram-box">Fuente</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box transducer">Transductor<br><small>(Entrada)</small></div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">Transmisor</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">Canal</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">Receptor</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box transducer">Transductor<br><small>(Salida)</small></div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">Destino</div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h2>Transductores</h2>
                    <table>
                        <tr>
                            <th>Tipo</th>
                            <th>Conversión</th>
                            <th>Ejemplos</th>
                        </tr>
                        <tr>
                            <td><strong>Entrada</strong></td>
                            <td>Física → Eléctrica</td>
                            <td>Micrófono, Cámara</td>
                        </tr>
                        <tr>
                            <td><strong>Salida</strong></td>
                            <td>Eléctrica → Física</td>
                            <td>Parlante, Pantalla</td>
                        </tr>
                    </table>
                    <div class="info-box">
                        <strong>Ejemplo - Audio:</strong> La voz (presión de aire) → Micrófono (eléctrico) 
                        → Transmisión → Parlante (presión de aire) → Oído
                    </div>
                </div>

                <div class="card">
                    <h2>Funciones por Componente</h2>
                    <table>
                        <tr>
                            <th>Componente</th>
                            <th>Función Principal</th>
                        </tr>
                        <tr>
                            <td>Fuente</td>
                            <td>Genera la información</td>
                        </tr>
                        <tr>
                            <td>Transductor (Tx)</td>
                            <td>Adapta la señal al canal</td>
                        </tr>
                        <tr>
                            <td>Transmisor</td>
                            <td>Modula, amplifica y envía</td>
                        </tr>
                        <tr>
                            <td>Canal</td>
                            <td>Transporta (aire, cable, fibra)</td>
                        </tr>
                        <tr>
                            <td>Receptor</td>
                            <td>Demodula y extrae el mensaje</td>
                        </tr>
                        <tr>
                            <td>Transductor (Rx)</td>
                            <td>Adapta al usuario</td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 3: PERTURBACIONES -->
        <section id="perturbaciones" class="content-section">
            <div class="card">
                <h2>Perturbaciones del Canal</h2>
                <div class="canvas-container">
                    <canvas id="perturbationCanvas"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>
                            <input type="checkbox" id="showAtenuacion" checked> 
                            Atenuación
                        </label>
                    </div>
                    <div class="control-group">
                        <label>
                            <input type="checkbox" id="showRuido"> 
                            Ruido
                        </label>
                    </div>
                    <div class="control-group">
                        <label>
                            <input type="checkbox" id="showDistorsion"> 
                            Distorsión
                        </label>
                    </div>
                    <div class="control-group">
                        <label>Nivel de efecto: <span class="value" id="effectLevel">50</span>%</label>
                        <input type="range" id="effectLevelInput" min="0" max="100" value="50">
                    </div>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #00bcd4;"></div>
                        <span>Señal Original</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff5722;"></div>
                        <span>Señal Afectada</span>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>Atenuación</h3>
                    <p>Pérdida de amplitud debido a la resistencia del medio. Expresada en dB.</p>
                    <div class="formula">
                        Atenuación (dB) = 10 · log₁₀(P₁/P₂)
                    </div>
                    <p><strong>Solución Analógica:</strong> Amplificadores (amplifican también el ruido)</p>
                    <p><strong>Solución Digital:</strong> Repetidores/Regeneradores (reconstruyen la señal)</p>
                </div>

                <div class="card">
                    <h3>Ruido</h3>
                    <p>Señal eléctrica indeseable y aleatoria que se superpone a la señal útil.</p>
                    <table>
                        <tr>
                            <th>Tipo</th>
                            <th>Característica</th>
                        </tr>
                        <tr>
                            <td>Térmico/Blanco</td>
                            <td>Aditivo, constante, inevitable</td>
                        </tr>
                        <tr>
                            <td>Impulsivo</td>
                            <td>Picos de gran amplitud, corta duración</td>
                        </tr>
                        <tr>
                            <td>Diafonía</td>
                            <td>Acoplamiento entre líneas cercanas</td>
                        </tr>
                        <tr>
                            <td>Intermodulación</td>
                            <td>Frecuencias "fantasma" nuevas</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="card">
                <h3>Relación Señal/Ruido (SNR)</h3>
                <div class="formula">
                    SNR<sub>dB</sub> = 10 · log₁₀(P<sub>señal</sub>/P<sub>ruido</sub>)
                </div>
                <div class="canvas-container">
                    <canvas id="snrCanvas"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Potencia Señal: <span class="value" id="signalPowerVal">10</span></label>
                        <input type="range" id="signalPower" min="1" max="20" value="10">
                    </div>
                    <div class="control-group">
                        <label>Potencia Ruido: <span class="value" id="noisePowerVal">1</span></label>
                        <input type="range" id="noisePower" min="0.1" max="5" step="0.1" value="1">
                    </div>
                </div>
                <div class="info-box" id="snrResult">
                    SNR = 10 dB (Buena calidad)
                </div>
            </div>
        </section>

        <!-- SECCIÓN 4: MODULACIÓN GENERAL -->
        <section id="modulacion" class="content-section">
            <div class="card">
                <h2>Conceptos de Modulación</h2>
                <div class="system-diagram">
                    <div class="diagram-box">Señal Modulante<br><small>(Información)</small></div>
                    <span class="diagram-arrow">+</span>
                    <div class="diagram-box" style="background: var(--secondary); color: var(--bg-dark);">Portadora<br><small>(Alta frecuencia)</small></div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box" style="background: var(--success);">Señal Modulada</div>
                </div>

                <h3>Razones para modular</h3>
                <div class="param-grid">
                    <div class="param-card">
                        <h4>Facilita Propagación</h4>
                        <p>Las señales de alta frecuencia se atenúan menos</p>
                    </div>
                    <div class="param-card">
                        <h4>Reduce Antenas</h4>
                        <p>λ = v/f, mayor frecuencia = antena más pequeña</p>
                    </div>
                    <div class="param-card">
                        <h4>Ordena el Espectro</h4>
                        <p>Canales específicos para cada transmisión</p>
                    </div>
                    <div class="param-card">
                        <h4>Evita Interferencias</h4>
                        <p>Separación en frecuencia</p>
                    </div>
                    <div class="param-card">
                        <h4>Optimiza Ancho de Banda</h4>
                        <p>Mejor aprovechamiento del canal</p>
                    </div>
                    <div class="param-card">
                        <h4>Protección vs Ruido</h4>
                        <p>Algunas modulaciones son más robustas</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Demodulación (Detector de Envolvente AM)</h2>
                <div class="system-diagram">
                    <div class="diagram-box">Señal AM</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">1. Selección<br><small>(Filtro pasabanda)</small></div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">2. Detección<br><small>(Diodo)</small></div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">3. Recuperación<br><small>(Filtro RC)</small></div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">Señal Original</div>
                </div>
                <div class="canvas-container">
                    <canvas id="demodCanvas"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <button class="toggle-btn" onclick="setDemodStage(0)">Señal AM</button>
                        <button class="toggle-btn" onclick="setDemodStage(1)">Selección</button>
                        <button class="toggle-btn" onclick="setDemodStage(2)">Detección</button>
                        <button class="toggle-btn" onclick="setDemodStage(3)">Recuperación</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 5: MODULACIÓN ANALÓGICA -->
        <section id="analogica" class="content-section">
            <div class="card">
                <h2>Modulación Analógica</h2>
                <div class="toggle-group">
                    <button class="toggle-btn active" onclick="setAnalogMod('am')">AM</button>
                    <button class="toggle-btn" onclick="setAnalogMod('fm')">FM</button>
                    <button class="toggle-btn" onclick="setAnalogMod('pm')">PM</button>
                </div>
                <div class="canvas-container">
                    <canvas id="analogModCanvas"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #00bcd4;"></div>
                        <span>Portadora</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffeb3b;"></div>
                        <span>Modulante</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff5722;"></div>
                        <span>Modulada</span>
                    </div>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Índice de Modulación (m): <span class="value" id="modIndexVal">0.5</span></label>
                        <input type="range" id="modIndex" min="0.1" max="1.5" step="0.1" value="0.5">
                    </div>
                    <div class="control-group">
                        <label>Frecuencia Modulante: <span class="value" id="fmVal">0.2</span> Hz</label>
                        <input type="range" id="fm" min="0.1" max="0.5" step="0.05" value="0.2">
                    </div>
                </div>
                <div id="modInfo" class="info-box">
                    <strong>AM (Amplitud Modulada):</strong> La amplitud de la portadora varía según la modulante. 
                    m = Eₘ/Ec. Ideal: m ≈ 1 (100%). Sobremodulación (m>1) causa distorsión.
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>AM - Índice de Modulación</h3>
                    <div class="formula">
                        m = (V<sub>máx</sub> - V<sub>mín</sub>) / (V<sub>máx</sub> + V<sub>mín</sub>)
                    </div>
                    <table>
                        <tr>
                            <th>Estado</th>
                            <th>Valor</th>
                            <th>Descripción</th>
                        </tr>
                        <tr>
                            <td>Ideal</td>
                            <td>m ≈ 1</td>
                            <td>Máxima potencia sin distorsión</td>
                        </tr>
                        <tr>
                            <td>Submodulación</td>
                            <td>m < 1</td>
                            <td>Señal débil, se desperdicia potencia</td>
                        </tr>
                        <tr>
                            <td>Sobremodulación</td>
                            <td>m > 1</td>
                            <td>Indeseable. Corte e inversión</td>
                        </tr>
                    </table>
                    <p><strong>Ancho de Banda AM:</strong> BW = 2 × f<sub>máx</sub></p>
                    <p><strong>BLU:</strong> Suprime portadora y una banda lateral. Mejora SNR en 12dB.</p>
                </div>

                <div class="card">
                    <h3>Modulación Angular (FM/PM)</h3>
                    <p>La amplitud permanece constante. La información está en el ángulo.</p>
                    <div class="formula">
                        FM: m = Δf / f<sub>m</sub>
                    </div>
                    <div class="formula">
                        PM: Δf = K · V<sub>m</sub>
                    </div>
                    <p><strong>FM:</strong> Frecuencia varía proporcional a la amplitud de la modulante.</p>
                    <p><strong>PM:</strong> Fase varía proporcional a la amplitud de la modulante.</p>
                    <p><strong>Funciones de Bessel:</strong> En FM/PM se generan infinitas frecuencias alrededor de la portadora.</p>
                    <table>
                        <tr>
                            <th>Índice</th>
                            <th>Efecto</th>
                        </tr>
                        <tr>
                            <td>m < 1</td>
                            <td>Banda estrecha (parece AM)</td>
                        </tr>
                        <tr>
                            <td>m = 2.4</td>
                            <td>Portadora desaparece (J₀=0)</td>
                        </tr>
                        <tr>
                            <td>m alto</td>
                            <td>Banda ancha, más robusto al ruido</td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 6: MODULACIÓN DIGITAL -->
        <section id="digital" class="content-section">
            <div class="card">
                <h2>Modulación Digital</h2>
                <div class="toggle-group">
                    <button class="toggle-btn active" onclick="setDigitalMod('ask')">ASK</button>
                    <button class="toggle-btn" onclick="setDigitalMod('fsk')">FSK</button>
                    <button class="toggle-btn" onclick="setDigitalMod('psk')">PSK</button>
                    <button class="toggle-btn" onclick="setDigitalMod('qpsk')">QPSK</button>
                </div>
                <div class="canvas-container">
                    <canvas id="digitalModCanvas"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Secuencia de Bits:</label>
                        <input type="text" id="bitSequence" value="10110010" maxlength="8" style="width: 100%; padding: 8px; background: var(--bg-dark); color: var(--text); border: 1px solid var(--border); border-radius: 4px; font-family: monospace;">
                    </div>
                    <div class="control-group">
                        <button class="toggle-btn" onclick="randomBits()">Aleatorio</button>
                        <button class="toggle-btn" onclick="setBits('10101010')">Alternado</button>
                    </div>
                </div>
                <div id="digitalModInfo" class="info-box">
                    <strong>ASK:</strong> Amplitude Shift Keying. "1" = presencia de portadora, "0" = ausencia. Simple pero susceptible al ruido.
                </div>
            </div>

            <div class="card">
                <h2>Diagrama de Constelación</h2>
                <div class="grid-2">
                    <div>
                        <div class="toggle-group">
                            <button class="toggle-btn" onclick="setConstellation('bpsk')">BPSK</button>
                            <button class="toggle-btn" onclick="setConstellation('qpsk')">QPSK</button>
                            <button class="toggle-btn" onclick="setConstellation('8psk')">8-PSK</button>
                            <button class="toggle-btn" onclick="setConstellation('16qam')">16-QAM</button>
                        </div>
                        <div id="constellationContainer" class="constellation"></div>
                    </div>
                    <div>
                        <h3>Interpretación</h3>
                        <table>
                            <tr>
                                <th>Elemento</th>
                                <th>Representa</th>
                            </tr>
                            <tr>
                                <td>Distancia al centro</td>
                                <td>Amplitud</td>
                            </tr>
                            <tr>
                                <td>Ángulo</td>
                                <td>Fase</td>
                            </tr>
                            <tr>
                                <td>Cantidad de puntos</td>
                                <td>Bits por símbolo (2ⁿ)</td>
                            </tr>
                        </table>
                        <div id="constellationInfo" class="info-box">
                            <strong>BPSK:</strong> 2 puntos, 1 bit/símbolo. Fases 0° y 180°.
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>ASK (Amplitude Shift Keying)</h3>
                    <p>La amplitud varía según los bits.</p>
                    <ul>
                        <li>"1" = Amplitud máxima</li>
                        <li>"0" = Amplitud cero o mínima</li>
                    </ul>
                    <p><strong>Ventaja:</strong> Simple y económica</p>
                    <p><strong>Desventaja:</strong> Muy susceptible al ruido</p>
                </div>

                <div class="card">
                    <h3>FSK (Frequency Shift Keying)</h3>
                    <p>La frecuencia salta entre valores.</p>
                    <ul>
                        <li>"0" = f₁</li>
                        <li>"1" = f₂</li>
                    </ul>
                    <p><strong>Ventaja:</strong> Resistente al ruido</p>
                    <p><strong>Desventaja:</strong> Mayor ancho de banda</p>
                </div>

                <div class="card">
                    <h3>PSK (Phase Shift Keying)</h3>
                    <p>La fase cambia bruscamente.</p>
                    <ul>
                        <li>BPSK: 0° = "1", 180° = "0"</li>
                        <li>Más robusta y eficiente</li>
                        <li>Usada en WiFi, 4G/LTE</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>QPSK (Quadrature PSK)</h3>
                    <p>4 fases: 45°, 135°, 225°, 315°</p>
                    <ul>
                        <li>2 bits por símbolo</li>
                        <li>00, 01, 10, 11</li>
                        <li>Doble velocidad sin más BW</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 7: MULTINIVEL -->
        <section id="multinivel" class="content-section">
            <div class="card">
                <h2>QAM (Quadrature Amplitude Modulation)</h2>
                <p>Combina cambios en amplitud Y fase simultáneamente. Genera múltiples "estados" o símbolos.</p>
                <div class="grid-2">
                    <div class="card" style="background: var(--bg-panel);">
                        <h3>Jerarquías QAM</h3>
                        <table>
                            <tr>
                                <th>Tipo</th>
                                <th>Símbolos</th>
                                <th>Bits/símbolo</th>
                            </tr>
                            <tr>
                                <td>8-QAM</td>
                                <td>8</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td>16-QAM</td>
                                <td>16</td>
                                <td>4</td>
                            </tr>
                            <tr>
                                <td>64-QAM</td>
                                <td>64</td>
                                <td>6</td>
                            </tr>
                            <tr>
                                <td>4K-QAM</td>
                                <td>4096</td>
                                <td>12</td>
                            </tr>
                        </table>
                    </div>
                    <div class="card" style="background: var(--bg-panel);">
                        <h3>Baudios vs bps</h3>
                        <div class="formula">
                            bps = Baudios × bits/símbolo
                        </div>
                        <table>
                            <tr>
                                <th>Modulación</th>
                                <th>Relación</th>
                            </tr>
                            <tr>
                                <td>ASK/FSK</td>
                                <td>1 Baudio = 1 bps</td>
                            </tr>
                            <tr>
                                <td>QPSK</td>
                                <td>1 Baudio = 2 bps</td>
                            </tr>
                            <tr>
                                <td>16-QAM</td>
                                <td>1 Baudio = 4 bps</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="info-box">
                    <strong>Trade-off:</strong> Más puntos = más eficiente pero más sensible al ruido. 
                    Los puntos están más "apretados", facilitando confusiones.
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>Teorema de Nyquist</h3>
                    <p>Velocidad máxima en canal ideal (sin ruido).</p>
                    <div class="formula">
                        C = 2 · BW · log₂(M)
                    </div>
                    <p>Para más velocidad: aumentar BW o niveles M.</p>
                </div>

                <div class="card">
                    <h3>Teorema de Shannon</h3>
                    <p>Velocidad máxima real (con ruido).</p>
                    <div class="formula">
                        C = BW · log₂(1 + SNR)
                    </div>
                    <p>Con mucho ruido, la capacidad cae drásticamente.</p>
                </div>
            </div>

            <div class="card">
                <h2>Eficiencia Espectral</h2>
                <div class="canvas-container">
                    <canvas id="spectralCanvas"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Modulación:</label>
                        <select id="spectralMod" onchange="updateSpectral()" style="width: 100%; padding: 8px; background: var(--bg-dark); color: var(--text); border: 1px solid var(--border); border-radius: 4px;">
                            <option value="bpsk">BPSK (1 bps/Hz)</option>
                            <option value="qpsk">QPSK (2 bps/Hz)</option>
                            <option value="8psk">8-PSK (3 bps/Hz)</option>
                            <option value="16qam">16-QAM (4 bps/Hz)</option>
                        </select>
                    </div>
                </div>
                <div class="info-box">
                    Medida en <strong>bps/Hz</strong>. Las modulaciones multinivel tienen alta eficiencia 
                    espectral porque transmiten más información en el mismo ancho de banda.
                </div>
            </div>
        </section>

        <!-- SECCIÓN 8: PCM -->
        <section id="pcm" class="content-section">
            <div class="card">
                <h2>PCM - Modulación por Impulsos Codificados</h2>
                <div class="system-diagram">
                    <div class="diagram-box">Señal Analógica</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box" style="background: var(--secondary); color: var(--bg-dark);">1. Muestreo</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box" style="background: var(--success);">2. Cuantificación</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box" style="background: var(--accent);">3. Codificación</div>
                    <span class="diagram-arrow">→</span>
                    <div class="diagram-box">Señal Digital</div>
                </div>
            </div>

            <div class="card">
                <h2>Visualización del Proceso PCM</h2>
                <div class="canvas-container">
                    <canvas id="pcmCanvas"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <button class="toggle-btn active" onclick="setPcmStage('original')">Original</button>
                        <button class="toggle-btn" onclick="setPcmStage('muestreo')">Muestreo</button>
                        <button class="toggle-btn" onclick="setPcmStage('cuantificacion')">Cuantificación</button>
                        <button class="toggle-btn" onclick="setPcmStage('completo')">Completo</button>
                    </div>
                    <div class="control-group">
                        <label>Niveles de Cuantificación: <span class="value" id="quantLevelsVal">8</span></label>
                        <input type="range" id="quantLevels" min="4" max="32" step="4" value="8">
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>1. Muestreo</h3>
                    <p>Se toman muestras de la amplitud a intervalos regulares.</p>
                    <div class="formula">
                        <strong>Teorema de Nyquist:</strong> f<sub>muestreo</sub> ≥ 2 · f<sub>máx</sub>
                    </div>
                    <p>Ejemplo: Voz humana usa 8 kHz.</p>
                    <div class="info-box">
                        Para reconstruir sin pérdida, samplear al menos al doble de la frecuencia máxima.
                    </div>
                </div>

                <div class="card">
                    <h3>2. Cuantificación</h3>
                    <p>Asignación de valores discretos a las muestras.</p>
                    <ul>
                        <li>Convierte muestras en niveles múltiples</li>
                        <li>Genera PAM (Pulse Amplitude Modulation)</li>
                        <li>Introduce <strong>ruido de cuantificación</strong></li>
                    </ul>
                    <p>Más niveles = menor error pero más bits.</p>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>3. Codificación</h3>
                    <p>Conversión de niveles a palabras binarias.</p>
                    <ul>
                        <li>Generalmente 8 bits por muestra</li>
                        <li>Estos códigos se transmiten como impulsos</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Companding</h3>
                    <p>Codificación no lineal para reducir ruido de cuantificación.</p>
                    <table>
                        <tr>
                            <th>Ley</th>
                            <th>Región</th>
                        </tr>
                        <tr>
                            <td>Ley μ (Mu)</td>
                            <td>Norteamérica, Japón</td>
                        </tr>
                        <tr>
                            <td>Ley A</td>
                            <td>Europa, Argentina, Sudamérica</td>
                        </tr>
                    </table>
                    <p>Comprime 12 bits → 8 bits</p>
                </div>
            </div>

            <div class="card">
                <h2>Modulación de Pulsos</h2>
                <div class="toggle-group">
                    <button class="toggle-btn active" onclick="setPulseMod('pam')">PAM</button>
                    <button class="toggle-btn" onclick="setPulseMod('pwm')">PWM</button>
                    <button class="toggle-btn" onclick="setPulseMod('ppm')">PPM</button>
                </div>
                <div class="canvas-container">
                    <canvas id="pulseModCanvas"></canvas>
                </div>
                <div id="pulseModInfo" class="info-box">
                    <strong>PAM:</strong> Modula la amplitud de cada pulso. Paso previo al PCM.
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>Códigos de Línea</h3>
                    <p>Formatos para transmitir bits por cable:</p>
                    <table>
                        <tr>
                            <th>Código</th>
                            <th>Característica</th>
                        </tr>
                        <tr>
                            <td><strong>AMI</strong></td>
                            <td>"1" alterna polaridad (+V, -V). "0" = 0V</td>
                        </tr>
                        <tr>
                            <td><strong>HDB3</strong></td>
                            <td>Mejora de AMI. Máximo 3 ceros seguidos</td>
                        </tr>
                    </table>
                    <p>Objetivos: Eliminar DC, mantener sincronismo</p>
                </div>

                <div class="card">
                    <h3>Multiplexación TDM</h3>
                    <p>Técnica digital para transmitir varios canales por un mismo medio.</p>
                    <div class="formula">
                        1 Trama = N Time Slots
                    </div>
                    <p><strong>Jerarquía E1 (Europa):</strong></p>
                    <ul>
                        <li>32 Time Slots por trama</li>
                        <li>30 slots: voz/datos</li>
                        <li>TS0: sincronización</li>
                        <li>TS16: señalización</li>
                        <li>Velocidad: 2.048 Mb/s</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- SECCIÓN 9: ERRORES -->
        <section id="errores" class="content-section">
            <div class="card">
                <h2>Detección de Errores</h2>
                <div class="toggle-group">
                    <button class="toggle-btn active" onclick="setErrorMethod('paridad')">Paridad Simple</button>
                    <button class="toggle-btn" onclick="setErrorMethod('bloque')">Paridad de Bloque</button>
                    <button class="toggle-btn" onclick="setErrorMethod('checksum')">Checksum</button>
                    <button class="toggle-btn" onclick="setErrorMethod('crc')">CRC</button>
                </div>
                
                <div class="grid-2">
                    <div>
                        <h3>Datos de Entrada</h3>
                        <div class="bit-display" id="dataBits">
                            <span class="bit" data-pos="0">1</span>
                            <span class="bit" data-pos="1">0</span>
                            <span class="bit" data-pos="2">1</span>
                            <span class="bit" data-pos="3">1</span>
                            <span class="bit" data-pos="4">0</span>
                            <span class="bit" data-pos="5">0</span>
                            <span class="bit" data-pos="6">1</span>
                            <span class="bit" data-pos="7">0</span>
                        </div>
                        <p style="margin: 10px 0; color: var(--text-muted);">Haz clic en los bits para cambiarlos</p>
                        <button class="toggle-btn" onclick="introduceError()">Introducir Error Aleatorio</button>
                    </div>
                    <div>
                        <h3>Resultado</h3>
                        <div class="bit-display" id="resultBits">
                            Calculando...
                        </div>
                        <div id="errorDetectionResult" class="info-box">
                            Paridad Par: Agregar bit para que cantidad de 1s sea par
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>Paridad Simple</h3>
                    <p>Agrega 1 bit al final del dato.</p>
                    <ul>
                        <li><strong>Par:</strong> Cantidad total de 1s es par</li>
                        <li><strong>Impar:</strong> Cantidad total de 1s es impar</li>
                    </ul>
                    <p><strong>Eficacia:</strong> Solo detecta errores aislados (1 bit).</p>
                    <p>Si hay número par de errores, pasa desapercibido.</p>
                </div>

                <div class="card">
                    <h3>Paridad de Bloque</h3>
                    <p>Paridad en dos dimensiones:</p>
                    <ul>
                        <li><strong>Vertical:</strong> Paridad simple por carácter</li>
                        <li><strong>Horizontal:</strong> Paridad de bits en misma posición</li>
                    </ul>
                    <p>Mucho más eficaz que la simple.</p>
                </div>

                <div class="card">
                    <h3>Checksum</h3>
                    <p>Suma de verificación aritmética:</p>
                    <ol>
                        <li>Sumar algebraicamente las palabras</li>
                        <li>Aplicar complemento a 1</li>
                        <li>Enviar con el mensaje</li>
                    </ol>
                    <p>En recepción: Si suma da todo "1", no hay error.</p>
                </div>

                <div class="card">
                    <h3>CRC</h3>
                    <p>Control de Redundancia Cíclica:</p>
                    <ul>
                        <li>Trata bits como coeficientes de polinomio</li>
                        <li>Divide mensaje por polinomio generador</li>
                        <li>El resto es el CRC</li>
                    </ul>
                    <p>Más robusto para errores en ráfaga.</p>
                </div>
            </div>

            <div class="card">
                <h2>Corrección de Errores (FEC)</h2>
                <div class="grid-2">
                    <div>
                        <h3>Distancia de Hamming</h3>
                        <p>Diferencia en cantidad de bits entre palabras válidas.</p>
                        <table>
                            <tr>
                                <th>Operación</th>
                                <th>Distancia Mínima</th>
                            </tr>
                            <tr>
                                <td>Detectar n errores</td>
                                <td>D ≥ n + 1</td>
                            </tr>
                            <tr>
                                <td>Corregir n errores</td>
                                <td>D ≥ 2n + 1</td>
                            </tr>
                        </table>
                        <p>Para corregir 1 bit: D ≥ 3</p>
                    </div>
                    <div>
                        <h3>Código de Hamming</h3>
                        <p>Corrige errores simples agregando bits de paridad.</p>
                        <div class="formula">
                            2<sup>p</sup> ≥ n + p + 1
                        </div>
                        <p>p = bits de paridad, n = bits de datos</p>
                        <p>Bits de paridad en posiciones: 1, 2, 4, 8, ...</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Simulador Hamming (7,4)</h2>
                <div class="grid-2">
                    <div>
                        <h3>Datos (4 bits)</h3>
                        <div class="bit-display" id="hammingData">
                            <span class="bit" onclick="toggleHammingBit(3)">1</span>
                            <span class="bit" onclick="toggleHammingBit(2)">0</span>
                            <span class="bit" onclick="toggleHammingBit(1)">1</span>
                            <span class="bit" onclick="toggleHammingBit(0)">1</span>
                        </div>
                        <p style="margin: 10px 0; color: var(--text-muted);">Posiciones: 3, 5, 6, 7</p>
                    </div>
                    <div>
                        <h3>Código Hamming (7 bits)</h3>
                        <div class="bit-display" id="hammingCode">
                            Calculando...
                        </div>
                        <p style="margin: 10px 0; color: var(--text-muted);">Pos: 1(P1), 2(P2), 3(D1), 4(P3), 5(D2), 6(D3), 7(D4)</p>
                    </div>
                </div>
                <div class="controls">
                    <button class="toggle-btn" onclick="introduceHammingError()">Introducir Error</button>
                    <button class="toggle-btn" onclick="detectHammingError()">Detectar y Corregir</button>
                </div>
                <div id="hammingResult" class="info-box">
                    Código Hamming listo. Puede detectar y corregir 1 error.
                </div>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>